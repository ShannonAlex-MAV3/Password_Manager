{% extends "layout.html" %}

{% block title %} LogIn and Register {% endblock %}


{% block main%}
<div class="content">

    <div class="pt-5">
        {% with messages = get_flashed_messages() %}
        {% if messages %}
        {% for message in messages %}
        <div class="alert alert-secondary mb-0 text-center" role="alert" style="position: relative; top: 10%; margin-top: 1%; margin-bottom: 1%!important;">
            {{message}}
        </div>
        {% endfor %}
        {% endif %}
        {% endwith %}
        <div class="container">
            <div class="row">
                <div class="col-6" style="margin-left: 25%;">
                    <!-- Pills navs -->
                    <ul class="nav nav-pills nav-justified mb-3" id="ex1" role="tablist">
                        <li class="nav-item" role="presentation">
                            <a class="nav-link active" id="tab-login" data-mdb-toggle="pill" href="#pills-login"
                                role="tab" aria-controls="pills-login" aria-selected="true">Login</a>
                        </li>
                        <li class="nav-item" role="presentation">
                            <a class="nav-link" id="tab-register" data-mdb-toggle="pill" href="#pills-register"
                                role="tab" aria-controls="pills-register" aria-selected="false">Register</a>
                        </li>
                    </ul>
                    <!-- Pills navs -->

                    <!-- Pills content -->
                    <div class="tab-content">
                        <div class="tab-pane fade show active" id="pills-login" role="tabpanel"
                            aria-labelledby="tab-login">
                            <form action="/login" method="post">
                                <!-- Email input -->
                                <div class="form-outline mb-4">
                                    <input type="text" id="loginName" class="form-control" name="username"
                                        placeholder="username">

                                </div>

                                <!-- Password input -->
                                <div class="form-outline mb-4">
                                    <input type="password" id="loginPassword" class="form-control" name="password"
                                        placeholder="password">

                                </div>



                                <!-- Submit button -->
                                <button class="btn btn-primary" type="submit"
                                    style="position: relative; left: 39%; width: 25%;">Log In</button>

                            </form>
                        </div>


                        <div class="tab-pane fade" id="pills-register" role="tabpanel" aria-labelledby="tab-register">
                            <form action="/register" method="post">
                                <!-- Username input -->
                                <div class="form-outline mb-4">
                                    <input type="text" id="username" class="form-control" name="username"
                                        placeholder="Username">

                                </div>
                                <!-- Password input -->
                                <div class="form-outline mb-4">
                                    <input type="password" id="password" class="form-control" name="password"
                                        placeholder="Password">

                                </div>
                                <!-- Repeat Password input -->
                                <div class="form-outline mb-4">
                                    <input type="password" id="confirmation" class="form-control" name="confirmation"
                                        placeholder="Confirm password">

                                </div>

                                <!-- Submit button -->
                                <button class="btn btn-primary" type="submit"
                                    style="position: relative; left: 39%; width: 25%;">Register</button>
                            </form>
                        </div>
                    </div>
                    <!-- Pills content -->

                </div>

            </div>
        </div>
    </div>
</div>



<script>
    // script for choosing between login and register form
    login = document.querySelector(" #tab-login")
     register = document.querySelector("#tab-register")
    login_form = document.querySelector("#pills-login")
    register_form = document.querySelector("#pills-register")

    register.addEventListener("click", function () {
        register.classList.add("active");
        register_form.classList.add("show");
        register_form.classList.add("active");
        login.classList.remove("active"); 
        login_form.classList.remove("show");
        login_form.classList.remove("active");
    }) 
    login.addEventListener("click", function() {
        login.classList.add("active"); 
        login_form.classList.add("show");
        login_form.classList.add("active"); 
        register.classList.remove("active");
        register_form.classList.remove("show"); 
        register_form.classList.remove("active");
    })


    //script for flash msg fade
    // alert fade
    flashmsg = document.querySelector(".alert")
    // set time for alert to wait in miliseconds
    var time = 4000


    if (flashmsg){
        setTimeout(function(){
            setInterval(function() {
                opacity = Number(getComputedStyle(flashmsg).opacity)
                if (opacity > 0){
                    opacity = opacity - 0.1
                    flashmsg.style.opacity = opacity
                }
            },20);
        },time);
    }
</script>


{% endblock %}